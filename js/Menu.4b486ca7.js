(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Menu"],{2532:function(t,e,r){"use strict";var s=r("23e7"),a=r("5a34"),i=r("1d80"),o=r("ab13");s({target:"String",proto:!0,forced:!o("includes")},{includes:function(t){return!!~String(i(this)).indexOf(a(t),arguments.length>1?arguments[1]:void 0)}})},"3b0c":function(t,e,r){"use strict";var s=r("e61b"),a=r.n(s);a.a},"44e7":function(t,e,r){var s=r("861d"),a=r("c6b6"),i=r("b622"),o=i("match");t.exports=function(t){var e;return s(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==a(t))}},"5a34":function(t,e,r){var s=r("44e7");t.exports=function(t){if(s(t))throw TypeError("The method doesn't accept regular expressions");return t}},"9a0b":function(t,e,r){"use strict";r.r(e);var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"menu"}},[r("Items"),r("Cart")],1)},a=[],i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"items"}},[r("b-navbar",{attrs:{toggleable:"md",type:"dark",variant:"dark",fixed:"top"}},[r("b-navbar-brand",[r("router-link",{attrs:{to:"/"}},[r("img",{staticStyle:{"margin-left":"10px"},attrs:{src:t.logoImg,width:"28",height:"28"}})])],1),r("b-navbar-toggle",{attrs:{target:"collapse"}}),r("b-collapse",{attrs:{id:"collapse","is-nav":""}},[r("b-navbar-nav",{staticClass:"m-auto"},[r("b-nav-item",{attrs:{href:"#setMeals"}},[t._v("猴頭菇套餐")]),r("b-nav-item",{attrs:{href:"#hotPots"}},[t._v("火鍋套餐")]),r("b-nav-item",{attrs:{href:"#rices"}},[t._v("飯類套餐")]),r("b-nav-item",{attrs:{href:"#noodles"}},[t._v("麵類套餐")]),r("b-nav-item",{attrs:{href:"#aLaCartes"}},[t._v("單點系列")]),r("b-nav-item",{attrs:{href:"#preOrders"}},[t._v("預購系列")])],1)],1)],1),r("b-row",{attrs:{id:"setMeals"}},[r("h3",{staticClass:"col-12"},[t._v(t._s(t.cardTitles[0]))]),t._l(t.setMeals,(function(e,s){return r("b-col",{key:s,attrs:{md:"6",lg:"4"}},[r("b-card",[r("b-row",{staticClass:"item-body-row"},[r("b-col",{staticClass:"item-body"},[r("Photoswipe",[r("b-img",{directives:[{name:"pswp",rawName:"v-pswp",value:e.img,expression:"item.img"}],attrs:{fluid:"",src:e.img}})],1)],1),r("b-col",{staticClass:"item-body"},[r("b-card-body",[r("h4",[t._v(t._s(e.name))]),r("p",[t._v("NT "+t._s(e.price))]),r("p",[t._v(t._s(e.description))]),r("div",{staticClass:"btn-default"},[r("p-button",{nativeOn:{click:function(r){return t.deduct(e)}}},[r("i",{staticClass:"ti-minus"})]),r("p-button",{staticClass:"btn-count",attrs:{disabled:""}},[t._v(t._s(e.count))]),r("p-button",{nativeOn:{click:function(r){return t.add(e)}}},[r("i",{staticClass:"ti-plus"})])],1)])],1)],1)],1)],1)}))],2),r("b-row",{attrs:{id:"hotPots"}},[r("h3",{staticClass:"col-12"},[t._v(t._s(t.cardTitles[1]))]),t._l(t.hotPots,(function(e,s){return r("b-col",{key:s,attrs:{md:"6",lg:"4"}},[r("b-card",[r("b-row",{staticClass:"item-body-row"},[r("b-col",{staticClass:"item-body"},[r("Photoswipe",[r("b-img",{directives:[{name:"pswp",rawName:"v-pswp",value:e.img,expression:"item.img"}],attrs:{fluid:"",src:e.img}})],1)],1),r("b-col",{staticClass:"item-body"},[r("b-card-body",[r("h4",[t._v(t._s(e.name))]),r("p",[t._v("NT "+t._s(e.price))]),r("p",[t._v(t._s(e.description))]),r("div",{staticClass:"btn-default"},[r("p-button",{nativeOn:{click:function(r){return t.deduct(e)}}},[r("i",{staticClass:"ti-minus"})]),r("p-button",{staticClass:"btn-count",attrs:{disabled:""}},[t._v(t._s(e.count))]),r("p-button",{nativeOn:{click:function(r){return t.add(e)}}},[r("i",{staticClass:"ti-plus"})])],1)])],1)],1)],1)],1)}))],2),r("b-row",{attrs:{id:"rices"}},[r("h3",{staticClass:"col-12"},[t._v(t._s(t.cardTitles[2]))]),t._l(t.rices,(function(e,s){return r("b-col",{key:s,attrs:{md:"6",lg:"4"}},[r("b-card",[r("b-row",{staticClass:"item-body-row"},[r("b-col",[r("Photoswipe",[r("b-img",{directives:[{name:"pswp",rawName:"v-pswp",value:e.img,expression:"item.img"}],attrs:{fluid:"",src:e.img}})],1)],1),r("b-col",[r("b-card-body",[r("h4",[t._v(t._s(e.name))]),r("p",[t._v("NT "+t._s(e.price))]),r("p",[t._v(t._s(e.description))]),r("div",{staticClass:"btn-default"},[r("p-button",{nativeOn:{click:function(r){return t.deduct(e)}}},[r("i",{staticClass:"ti-minus"})]),r("p-button",{staticClass:"btn-count",attrs:{disabled:""}},[t._v(t._s(e.count))]),r("p-button",{nativeOn:{click:function(r){return t.add(e)}}},[r("i",{staticClass:"ti-plus"})])],1)])],1)],1)],1)],1)}))],2),r("b-row",{attrs:{id:"noodles"}},[r("h3",{staticClass:"col-12"},[t._v(t._s(t.cardTitles[3]))]),t._l(t.noodles,(function(e,s){return r("b-col",{key:s,attrs:{md:"6",lg:"4"}},[r("b-card",[r("b-row",{staticClass:"item-body-row"},[r("b-col",[r("Photoswipe",[r("b-img",{directives:[{name:"pswp",rawName:"v-pswp",value:e.img,expression:"item.img"}],attrs:{fluid:"",src:e.img}})],1)],1),r("b-col",[r("b-card-body",[r("h4",[t._v(t._s(e.name))]),r("p",[t._v("NT "+t._s(e.price))]),r("p",[t._v(t._s(e.description))]),r("div",{staticClass:"btn-default"},[r("p-button",{nativeOn:{click:function(r){return t.deduct(e)}}},[r("i",{staticClass:"ti-minus"})]),r("p-button",{staticClass:"btn-count",attrs:{disabled:""}},[t._v(t._s(e.count))]),r("p-button",{nativeOn:{click:function(r){return t.add(e)}}},[r("i",{staticClass:"ti-plus"})])],1)])],1)],1)],1)],1)}))],2),r("b-row",{attrs:{id:"aLaCartes"}},[r("h3",{staticClass:"col-12"},[t._v(t._s(t.cardTitles[4]))]),t._l(t.aLaCartes,(function(e,s){return r("b-col",{key:s,attrs:{md:"6",lg:"4"}},[r("b-card",[r("b-row",{staticClass:"item-body-row"},[r("b-col",[r("Photoswipe",[r("b-img",{directives:[{name:"pswp",rawName:"v-pswp",value:e.img,expression:"item.img"}],attrs:{fluid:"",src:e.img}})],1)],1),r("b-col",[r("b-card-body",[r("h4",[t._v(t._s(e.name))]),r("p",[t._v("NT "+t._s(e.price))]),r("p",[t._v(t._s(e.description))]),r("div",{staticClass:"btn-default"},[r("p-button",{nativeOn:{click:function(r){return t.deduct(e)}}},[r("i",{staticClass:"ti-minus"})]),r("p-button",{staticClass:"btn-count",attrs:{disabled:""}},[t._v(t._s(e.count))]),r("p-button",{nativeOn:{click:function(r){return t.add(e)}}},[r("i",{staticClass:"ti-plus"})])],1)])],1)],1)],1)],1)}))],2),r("b-row",{attrs:{id:"preOrders"}},[r("h3",{staticClass:"col-12"},[t._v(t._s(t.cardTitles[5]))]),t._l(t.preOrders,(function(e,s){return r("b-col",{key:s,attrs:{md:"6",lg:"4"}},[r("b-card",[r("b-row",{staticClass:"item-body-row"},[r("b-col",{staticClass:"item-body"},[r("Photoswipe",[r("b-img",{directives:[{name:"pswp",rawName:"v-pswp",value:e.img,expression:"item.img"}],attrs:{fluid:"",src:e.img}})],1)],1),r("b-col",{staticClass:"item-body"},[r("b-card-body",[r("h4",[t._v(t._s(e.name))]),r("p",[t._v("NT "+t._s(e.price))]),r("p",[t._v(t._s(e.description))]),r("div",{staticClass:"btn-default"},[r("p-button",{nativeOn:{click:function(r){return t.deduct(e)}}},[r("i",{staticClass:"ti-minus"})]),r("p-button",{staticClass:"btn-count",attrs:{disabled:""}},[t._v(t._s(e.count))]),r("p-button",{nativeOn:{click:function(r){return t.add(e)}}},[r("i",{staticClass:"ti-plus"})])],1)])],1)],1)],1)],1)}))],2)],1)},o=[],n=(r("a4d3"),r("e01a"),r("caad"),r("d81d"),r("a434"),r("b0c0"),r("2532"),r("d28b"),r("d3b7"),r("3ca3"),r("ddb0"),r("06c5"));function c(t,e){var r;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=Object(n["a"])(t))||e&&t&&"number"===typeof t.length){r&&(t=r);var s=0,a=function(){};return{s:a,n:function(){return s>=t.length?{done:!0}:{done:!1,value:t[s++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return o=t.done,t},e:function(t){c=!0,i=t},f:function(){try{o||null==r["return"]||r["return"]()}finally{if(c)throw i}}}}var l={name:"Items",data:function(){return{logoImg:"./images/logo/logo_mushroom.png",cardTitles:["猴頭菇套餐","火鍋套餐","飯類套餐","麵類套餐","單點系列","預購系列"],setMeals:[],hotPots:[],rices:[],noodles:[],aLaCartes:[],preOrders:[],toCartItems:[]}},methods:{add:function(t){t.count++;var e,r=c(this.toCartItems);try{for(r.s();!(e=r.n()).done;){var s=e.value;if(s.name.includes(t.name))return s.count++,void(s.price+=t.price)}}catch(a){r.e(a)}finally{r.f()}this.toCartItems.push({name:t.name,count:t.count,price:t.price}),this.$store.commit("addCartItems",this.toCartItems)},deduct:function(t){0===t.count?this.toCartItems.splice(t,1):t.count--;var e,r=c(this.toCartItems);try{for(r.s();!(e=r.n()).done;){var s=e.value;if(0===s.count)return void this.toCartItems.splice(t,1);s.name.includes(t.name)&&(s.count--,s.price-=t.price)}}catch(a){r.e(a)}finally{r.f()}}},mounted:function(){var t=this;this.axios.get("https://project-19101-cuisine.herokuapp.com/product").then((function(e){var r=e.data.result;r.map((function(e){var r={name:e.name,price:e.price,description:e.description,img:e.img,count:0};e.name.includes("猴頭菇套餐")&&t.setMeals.push(r),e.name.includes("火鍋")&&t.hotPots.push(r),e.name.includes("飯")&&t.rices.push(r),e.name.includes("麵")&&t.noodles.push(r),e.name.includes("預購")&&t.preOrders.push(r),e.name.includes("猴頭菇套餐")||e.name.includes("火鍋")||e.name.includes("飯")||e.name.includes("麵")||e.name.includes("預購")||t.aLaCartes.push(r)}))})).catch((function(t){alert(t.message+" 伺服器錯誤")}))}},d=l,u=r("2877"),m=Object(u["a"])(d,i,o,!1,null,null,null),p=m.exports,b=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"cart"}},[r("b-btn",{directives:[{name:"b-toggle",rawName:"v-b-toggle.list",modifiers:{list:!0}}],staticClass:"icon-cart",attrs:{variant:"link"}},[r("b-icon",{attrs:{icon:"cart4"},on:{click:t.sum}})],1),r("b-sidebar",{attrs:{id:"list",right:"",backdrop:"",width:"500px"}},[r("b-card",{staticClass:"mt-3",attrs:{title:"您的訂單","bg-variant":"transparent"},on:{mouseover:t.sum}},[r("h6",{staticClass:"text-right"},[t._v("餐點數量："+t._s(t.totalCount))]),r("hr"),r("b-table",{attrs:{striped:"",hover:"",fixed:"",borderless:"",items:t.get}}),r("p",{staticClass:"text-center"},[t._v("總計："+t._s(t.totalPrice))]),r("p",{staticClass:"text-center"},[r("b-btn",{attrs:{pill:"",variant:"danger"},on:{click:t.cancelOrder}},[t._v("取消")]),r("b-btn",{directives:[{name:"b-modal",rawName:"v-b-modal.order",modifiers:{order:!0}}],staticStyle:{"margin-left":"5px"},attrs:{pill:"",variant:"info"}},[t._v("確認")])],1),r("b-modal",{attrs:{id:"order",centered:"","hide-footer":"",title:"線上點餐","header-bg-variant":"info","header-text-variant":"light","body-bg-variant":"light"}},[r("b-form",{staticClass:"text-center px-5"},[r("b-row",{staticClass:"justify-content-center"},[r("b-form-group",{staticClass:"date col-12"},[r("b-datepicker",{attrs:{"hide-header":"",locale:"zh-tw","selected-variant":"info","today-variant":"info",placeholder:"取餐日期"},model:{value:t.order.orderDate,callback:function(e){t.$set(t.order,"orderDate",e)},expression:"order.orderDate"}}),r("b-form-select",{attrs:{options:t.pickupTime,required:""},model:{value:t.order.pickupTime,callback:function(e){t.$set(t.order,"pickupTime",e)},expression:"order.pickupTime"}}),r("b-form-select",{attrs:{options:t.togo,required:""},model:{value:t.order.togo,callback:function(e){t.$set(t.order,"togo",e)},expression:"order.togo"}})],1),r("b-input-group",{staticClass:"name"},[r("b-form-input",{attrs:{placeholder:"姓名",required:""},model:{value:t.order.name,callback:function(e){t.$set(t.order,"name",e)},expression:"order.name"}}),r("b-input-group-prepend",{attrs:{"is-text":""}},[r("b-form-radio-group",{staticClass:"gender",attrs:{options:t.gender,required:""},model:{value:t.order.gender,callback:function(e){t.$set(t.order,"gender",e)},expression:"order.gender"}})],1)],1),r("b-input-group",{staticClass:"mobile"},[r("b-form-input",{attrs:{placeholder:"電話",required:""},model:{value:t.order.mobile,callback:function(e){t.$set(t.order,"mobile",e)},expression:"order.mobile"}}),r("b-input-group-prepend",{attrs:{"is-text":""}},[r("b-icon",{attrs:{icon:"phone"}})],1)],1),r("b-input-group",{staticClass:"memo"},[r("b-form-textarea",{attrs:{placeholder:"備註（30字內）",rows:"5",state:t.order.memo.length<=30},model:{value:t.order.memo,callback:function(e){t.$set(t.order,"memo",e)},expression:"order.memo"}})],1),r("div",{staticClass:"btn-group"},[r("b-btn",{on:{click:t.cancel}},[t._v("取消")]),r("b-btn",{on:{click:t.submit}},[t._v("送出")])],1)],1)],1)],1)],1)],1)],1)},v=[],h=(r("99af"),r("0759")),f=r("7386"),g={name:"Cart",components:{BIcon:h["a"],BIconCart4:f["f"],BIconPhone:f["v"]},data:function(){return{order:{name:"",gender:"",mobile:"",togo:null,orderDate:"",pickupTime:null,items:this.$store.getters.cartItems,memo:""},totalPrice:null,totalCount:null,gender:[{text:"先生",value:"先生"},{text:"小姐",value:"小姐"}],selected:[null],togo:[{text:"取餐方式",value:null},{text:"外帶",value:"外帶"},{text:"內用 ",value:"內用"}],pickupTime:[{text:"取餐時間",value:null},{text:"12:00",value:"12:00"},{text:"12:30",value:"12:30"},{text:"13:00",value:"13:00"},{text:"13:30",value:"13:30"},{text:"14:00",value:"14:00"},{text:"14:30",value:"14:30"},{text:"15:00",value:"15:00"},{text:"15:30",value:"15:30"},{text:"16:00",value:"16:00"},{text:"16:30",value:"16:30"},{text:"17:00",value:"17:00"},{text:"17:30",value:"17:30"},{text:"18:00",value:"18:00"},{text:"18:30",value:"18:30"},{text:"19:00",value:"19:00"},{text:"19:30",value:"19:30"},{text:"20:00",value:"20:00"}]}},computed:{get:function(t){return this.$store.getters.cartItems}},methods:{submit:function(){var t=this;event.preventDefault();var e=confirm("\n      請確認點餐資訊\n      \n        姓名：".concat(this.order.name," ").concat(this.order.gender,"\n        電話：").concat(this.order.mobile,"\n        取餐方式：").concat(this.order.togo,"\n        取餐日期：").concat(this.order.orderDate,"\n        取餐時間：").concat(this.order.pickupTime,"\n        餐點備註：").concat(this.order.memo,"\n      "));e&&(console.table(this.$store.getters.cartItems),this.axios.post("https://project-19101-cuisine.herokuapp.com/order",{name:this.order.name,gender:this.order.gender,mobile:this.order.mobile,togo:this.order.togo,orderDate:this.order.orderDate,pickupTime:this.order.pickupTime,items:this.$store.getters.cartItems,memo:this.order.memo,totalCount:this.totalCount,totalPrice:this.totalPrice}).then((function(e){t.$swal({icon:"success",title:"點餐成功"}),setTimeout((function(){location.reload()}),2e3)})).catch((function(e){t.$swal({icon:"error",title:"點餐失敗"}),console.log(e.message)})),this.order.items=[],this.$store.commit("addCartItems",this.order.items))},cancelOrder:function(){this.order.items=[],this.$store.commit("addCartItems",this.order.items),this.totalCount=0,this.totalPrice=0,location.reload()},cancel:function(){event.preventDefault(),this.order.name="",this.order.gender="",this.order.mobile="",this.order.togo=null,this.order.orderDate="",this.order.pickupTime=null,this.order.memo=""},sum:function(){var t,e=0,r=0,s=c(this.$store.getters.cartItems);try{for(s.s();!(t=s.n()).done;){var a=t.value;e+=a.price,r+=a.count}}catch(i){s.e(i)}finally{s.f()}this.totalPrice=e,this.totalCount=r}}},_=g,C=Object(u["a"])(_,b,v,!1,null,null,null),x=C.exports,w={name:"Menu",components:{Items:p,Cart:x}},y=w,k=(r("3b0c"),Object(u["a"])(y,s,a,!1,null,"ce8641e8",null));e["default"]=k.exports},ab13:function(t,e,r){var s=r("b622"),a=s("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(r){try{return e[a]=!1,"/./"[t](e)}catch(s){}}return!1}},caad:function(t,e,r){"use strict";var s=r("23e7"),a=r("4d64").includes,i=r("44d2"),o=r("ae40"),n=o("indexOf",{ACCESSORS:!0,1:0});s({target:"Array",proto:!0,forced:!n},{includes:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}}),i("includes")},e61b:function(t,e,r){}}]);
//# sourceMappingURL=Menu.4b486ca7.js.map