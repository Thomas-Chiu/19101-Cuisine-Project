{"version":3,"sources":["webpack:///./src/views/admin/Order.vue?e6b4","webpack:///src/views/admin/Order.vue","webpack:///./src/views/admin/Order.vue?8625","webpack:///./src/views/admin/Order.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","_v","tableData","tableColumns","scopedSlots","_u","key","fn","ref","row","_s","ID","edit","model","value","callback","$$v","$set","expression","name","gender","mobile","togo","orderDate","pickupTime","memo","staticClass","nativeOn","$event","handleUpdate","handleCancel","handleEdit","staticStyle","handleDelete","staticRenderFns","components","data","methods","event","preventDefault","warning","axios","delete","patch","toggleSort","console","log","mounted","get","component"],"mappings":"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","file":"js/Order.d45c9a0b.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"order\"}},[_c('card',[_c('form',[_c('b-row',[_c('b-col',{attrs:{\"cols\":\"12\"}},[_c('b-alert',{attrs:{\"variant\":\"warning\",\"show\":\"\"}},[_vm._v(\"編輯格式提醒 / 外帶欄位：輸入內用或外帶 / 日期：yyyy-mm-dd / 時間：hr:min / 備註 30 字內\")])],1)],1),_c('paper-table',{attrs:{\"data\":_vm.tableData,\"columns\":_vm.tableColumns,\"type\":\"hover\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('td',[_vm._v(_vm._s(row.ID))]),(!row.edit)?_c('td',[_vm._v(_vm._s(row.name))]):_c('td',[_c('fg-input',{model:{value:(_vm.model.name),callback:function ($$v) {_vm.$set(_vm.model, \"name\", $$v)},expression:\"model.name\"}})],1),(!row.edit)?_c('td',[_vm._v(_vm._s(row.gender))]):_c('td',[_c('fg-input',{model:{value:(_vm.model.gender),callback:function ($$v) {_vm.$set(_vm.model, \"gender\", $$v)},expression:\"model.gender\"}})],1),(!row.edit)?_c('td',[_vm._v(_vm._s(row.mobile))]):_c('td',[_c('fg-input',{model:{value:(_vm.model.mobile),callback:function ($$v) {_vm.$set(_vm.model, \"mobile\", $$v)},expression:\"model.mobile\"}})],1),(!row.edit)?_c('td',[_vm._v(_vm._s(row.togo))]):_c('td',[_c('fg-input',{attrs:{\"placeholder\":\"請輸入 內用 / 外帶\"},model:{value:(_vm.model.togo),callback:function ($$v) {_vm.$set(_vm.model, \"togo\", $$v)},expression:\"model.togo\"}})],1),(!row.edit)?_c('td',[_vm._v(_vm._s(row.orderDate))]):_c('td',[_c('fg-input',{model:{value:(_vm.model.orderDate),callback:function ($$v) {_vm.$set(_vm.model, \"orderDate\", $$v)},expression:\"model.orderDate\"}})],1),(!row.edit)?_c('td',[_vm._v(_vm._s(row.pickupTime))]):_c('td',[_c('fg-input',{model:{value:(_vm.model.pickupTime),callback:function ($$v) {_vm.$set(_vm.model, \"pickupTime\", $$v)},expression:\"model.pickupTime\"}})],1),(!row.edit)?_c('td',[_vm._v(_vm._s(row.memo))]):_c('td',[_c('b-textarea',{attrs:{\"rows\":\"4\"},model:{value:(_vm.model.memo),callback:function ($$v) {_vm.$set(_vm.model, \"memo\", $$v)},expression:\"model.memo\"}})],1),_c('td',{staticClass:\"icon-col\"},[(!row.edit)?_c('div',{staticClass:\"btn-default\"},[_c('p-button',{attrs:{\"type\":\"info\",\"icon\":\"\"},nativeOn:{\"click\":function($event){return _vm.handleEdit(row)}}},[_c('i',{staticClass:\"ti-pencil-alt\"})]),_c('p-button',{staticStyle:{\"margin-left\":\"10px\"},attrs:{\"type\":\"danger\",\"icon\":\"\"},nativeOn:{\"click\":function($event){return _vm.handleDelete(row)}}},[_c('i',{staticClass:\"ti-close\"})])],1):_c('div',{staticClass:\"btn-edit\"},[_c('p-button',{attrs:{\"outline\":\"\"},nativeOn:{\"click\":function($event){return _vm.handleUpdate(row)}}},[_vm._v(\"update\")]),_c('p-button',{attrs:{\"outline\":\"\"},nativeOn:{\"click\":function($event){return _vm.handleCancel(row)}}},[_vm._v(\"cancel\")])],1)])]}}])})],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template lang=\"pug\">\r\n  #order\r\n    card\r\n      form\r\n        b-row\r\n          b-col(cols=\"12\")\r\n            b-alert(variant=\"warning\" show) 編輯格式提醒 / 外帶欄位：輸入內用或外帶 / 日期：yyyy-mm-dd / 時間：hr:min / 備註 30 字內\r\n        paper-table(:data='tableData' :columns='tableColumns' type='hover')\r\n          template(v-slot='columns')\r\n            th(\r\n              v-for=\"(column, index) in tableColumns\"\r\n              :key=\"index\"\r\n              v-model=\"tableColumns\"\r\n              @click=\"toggleSort\"\r\n            ) {{ column }}\r\n          template(slot-scope='{row}')\r\n            td {{row.ID}}\r\n            td(v-if=\"!row.edit\") {{row.name}}\r\n            td(v-else)\r\n              fg-input(v-model=\"model.name\")\r\n            td(v-if=\"!row.edit\") {{row.gender}}\r\n            td(v-else)\r\n              fg-input(v-model=\"model.gender\")\r\n            td(v-if=\"!row.edit\") {{row.mobile}}\r\n            td(v-else)\r\n              fg-input(v-model=\"model.mobile\")\r\n            td(v-if=\"!row.edit\") {{row.togo}}\r\n            td(v-else)\r\n              fg-input(v-model=\"model.togo\" placeholder=\"請輸入 內用 / 外帶\")\r\n            td(v-if=\"!row.edit\") {{row.orderDate}}\r\n            td(v-else)\r\n              fg-input(v-model=\"model.orderDate\")\r\n            td(v-if=\"!row.edit\") {{row.pickupTime}}\r\n            td(v-else)\r\n              fg-input(v-model=\"model.pickupTime\")\r\n            td(v-else)\r\n              fg-input(v-model=\"model.pickupTime\")\r\n            td(v-if=\"!row.edit\") {{row.memo}}\r\n            td(v-else)\r\n              b-textarea(v-model=\"model.memo\" rows=\"4\")\r\n            td.icon-col\r\n              .btn-default(v-if=\"!row.edit\")\r\n                p-button(type='info' icon @click.native='handleEdit(row)')\r\n                  i.ti-pencil-alt\r\n                p-button(style='margin-left: 10px;' type='danger' icon @click.native='handleDelete(row)')\r\n                  i.ti-close\r\n              .btn-edit(v-else)\r\n                p-button(@click.native='handleUpdate(row)' outline) update\r\n                p-button(@click.native='handleCancel(row)' outline) cancel\r\n</template>\r\n\r\n<script>\r\nimport { PaperTable } from '@/components'\r\n\r\nexport default {\r\n  name: 'Order',\r\n  components: { PaperTable },\r\n  data () {\r\n    return {\r\n      tableColumns: ['ID', '姓名', '性別', '電話', '外帶', '取餐日期', '取餐時間', '備註', '編輯 / 刪除'],\r\n      tableData: [], // slot-scope='{row}'\r\n      model: [\r\n        {\r\n          name: '',\r\n          gender: '',\r\n          mobile: '',\r\n          togo: '',\r\n          orderDate: '',\r\n          pickupTime: '',\r\n          memo: ''\r\n        }\r\n      ]\r\n    }\r\n  },\r\n  methods: {\r\n    handleEdit (row) { // 編輯\r\n      this.model.name = row.name\r\n      this.model.gender = row.gender\r\n      this.model.mobile = row.mobile\r\n      this.model.togo = row.togo\r\n      this.model.orderDate = row.orderDate\r\n      this.model.pickupTime = row.pickupTime\r\n      this.model.memo = row.memo\r\n      row.edit = true\r\n    },\r\n    handleDelete (row) { // 刪除\r\n      event.preventDefault()\r\n      const warning = confirm('確定要刪除？')\r\n      if (!warning) return\r\n      this.axios.delete(process.env.VUE_APP_APIURL + '/order/' + row.id)\r\n        .then(res => {\r\n          this.$swal({\r\n            toast: true,\r\n            showConfirmButton: false,\r\n            icon: 'success',\r\n            title: '刪除成功',\r\n            position: 'top-end',\r\n            timer: 2000,\r\n            timerProgressBar: true\r\n          })\r\n          // this.tableData.splice(row, 1)\r\n          setTimeout(() => {\r\n            location.reload()\r\n          }, 2000)\r\n        })\r\n        .catch(err => {\r\n          alert(err.message)\r\n        })\r\n    },\r\n    handleUpdate (row) { // 更新\r\n      event.preventDefault()\r\n      this.axios.patch(process.env.VUE_APP_APIURL + '/order/' + row.id, {\r\n        name: this.model.name,\r\n        gender: this.model.gender,\r\n        mobile: this.model.mobile,\r\n        togo: this.model.togo,\r\n        orderDate: this.model.orderDate,\r\n        pickupTime: this.model.pickupTime,\r\n        memo: this.model.memo\r\n      })\r\n        .then(res => {\r\n          this.$swal({\r\n            toast: true,\r\n            showConfirmButton: false,\r\n            icon: 'success',\r\n            title: '更新成功',\r\n            position: 'top-end',\r\n            timer: 2000,\r\n            timerProgressBar: true\r\n          })\r\n          setTimeout(() => {\r\n            location.reload()\r\n          }, 2000)\r\n        }).catch(err => {\r\n          alert('請按照格式，日期: yyyy-mm-dd，時間: hr:min')\r\n          console.log(err.message)\r\n        })\r\n      row.edit = false\r\n    },\r\n    handleCancel (row) { // 取消\r\n      row.edit = false\r\n    },\r\n    toggleSort (event) { // 排序功能.sort() 還沒做\r\n      console.log(this.tableData)\r\n    }\r\n  },\r\n  mounted () {\r\n    this.axios.get(process.env.VUE_APP_APIURL + '/order')\r\n      .then(res => {\r\n        console.log(res)\r\n        let ID = 0\r\n        this.tableData = res.data.result.map(d => {\r\n          let yes = ''\r\n          if (d.togo === '外帶') yes = '✔'\r\n          else yes = ''\r\n          ID++\r\n          return {\r\n            id: d.id,\r\n            ID,\r\n            name: d.name,\r\n            gender: d.gender,\r\n            mobile: d.mobile,\r\n            togo: yes,\r\n            orderDate: d.orderDate.substr(0, 10),\r\n            pickupTime: d.pickupTime,\r\n            items: d.items,\r\n            memo: d.memo,\r\n            edit: false\r\n          }\r\n        })\r\n      })\r\n      .catch(err => {\r\n        console.log(err)\r\n      })\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Order.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Order.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Order.vue?vue&type=template&id=73a275d7&lang=pug&\"\nimport script from \"./Order.vue?vue&type=script&lang=js&\"\nexport * from \"./Order.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}