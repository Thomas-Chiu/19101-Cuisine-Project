{"version":3,"sources":["webpack:///./src/views/admin/Booking.vue?8025","webpack:///src/views/admin/Booking.vue","webpack:///./src/views/admin/Booking.vue?53f0","webpack:///./src/views/admin/Booking.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","_v","tableData","tableColumns","scopedSlots","_u","key","fn","ref","row","_s","ID","edit","model","value","callback","$$v","$set","expression","name","gender","mobile","people","date","time","staticClass","nativeOn","$event","handleUpdate","handleCancel","handleEdit","staticStyle","handleDelete","staticRenderFns","components","data","methods","event","preventDefault","warning","axios","delete","patch","id","toggleSort","console","log","mounted","get","component"],"mappings":"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","file":"js/Booking.a37d4e61.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"booking\"}},[_c('card',[_c('form',[_c('b-row',[_c('b-col',{attrs:{\"cols\":\"12\"}},[_c('b-alert',{attrs:{\"variant\":\"warning\",\"show\":\"\"}},[_vm._v(\"編輯格式提醒 / 日期：yyyy-mm-dd / 時間：hr:min\")])],1)],1),_c('paper-table',{attrs:{\"data\":_vm.tableData,\"columns\":_vm.tableColumns,\"type\":\"hover\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('td',[_vm._v(_vm._s(row.ID))]),(!row.edit)?_c('td',[_vm._v(_vm._s(row.name))]):_c('td',[_c('fg-input',{model:{value:(_vm.model.name),callback:function ($$v) {_vm.$set(_vm.model, \"name\", $$v)},expression:\"model.name\"}})],1),(!row.edit)?_c('td',[_vm._v(_vm._s(row.gender))]):_c('td',[_c('fg-input',{model:{value:(_vm.model.gender),callback:function ($$v) {_vm.$set(_vm.model, \"gender\", $$v)},expression:\"model.gender\"}})],1),(!row.edit)?_c('td',[_vm._v(_vm._s(row.mobile))]):_c('td',[_c('fg-input',{model:{value:(_vm.model.mobile),callback:function ($$v) {_vm.$set(_vm.model, \"mobile\", $$v)},expression:\"model.mobile\"}})],1),(!row.edit)?_c('td',[_vm._v(_vm._s(row.people))]):_c('td',[_c('fg-input',{model:{value:(_vm.model.people),callback:function ($$v) {_vm.$set(_vm.model, \"people\", $$v)},expression:\"model.people\"}})],1),(!row.edit)?_c('td',[_vm._v(_vm._s(row.date))]):_c('td',[_c('fg-input',{model:{value:(_vm.model.date),callback:function ($$v) {_vm.$set(_vm.model, \"date\", $$v)},expression:\"model.date\"}})],1),(!row.edit)?_c('td',[_vm._v(_vm._s(row.time))]):_c('td',[_c('fg-input',{model:{value:(_vm.model.time),callback:function ($$v) {_vm.$set(_vm.model, \"time\", $$v)},expression:\"model.time\"}})],1),_c('td',{staticClass:\"icon-col\"},[(!row.edit)?_c('div',{staticClass:\"btn-default\"},[_c('p-button',{attrs:{\"type\":\"info\",\"icon\":\"\"},nativeOn:{\"click\":function($event){return _vm.handleEdit(row)}}},[_c('i',{staticClass:\"ti-pencil-alt\"})]),_c('p-button',{staticStyle:{\"margin-left\":\"10px\"},attrs:{\"type\":\"danger\",\"icon\":\"\"},nativeOn:{\"click\":function($event){return _vm.handleDelete(row)}}},[_c('i',{staticClass:\"ti-close\"})])],1):_c('div',{staticClass:\"btn-edit\"},[_c('p-button',{attrs:{\"outline\":\"\"},nativeOn:{\"click\":function($event){return _vm.handleUpdate(row)}}},[_vm._v(\"update\")]),_c('p-button',{attrs:{\"outline\":\"\"},nativeOn:{\"click\":function($event){return _vm.handleCancel(row)}}},[_vm._v(\"cancel\")])],1)])]}}])})],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template lang=\"pug\">\r\n  #booking\r\n    card\r\n      form\r\n        b-row\r\n          b-col(cols=\"12\")\r\n            b-alert(variant=\"warning\" show) 編輯格式提醒 / 日期：yyyy-mm-dd / 時間：hr:min\r\n        paper-table(:data='tableData' :columns='tableColumns' type='hover')\r\n          template(v-slot='columns')\r\n            th(\r\n              v-for=\"(column, index) in tableColumns\"\r\n              :key=\"index\"\r\n              v-model=\"tableColumns\"\r\n              @click=\"toggleSort\"\r\n            ) {{ column }}\r\n          template(slot-scope='{row}')\r\n            td {{row.ID}}\r\n            td(v-if=\"!row.edit\") {{row.name}}\r\n            td(v-else)\r\n              fg-input(v-model=\"model.name\")\r\n            td(v-if=\"!row.edit\") {{row.gender}}\r\n            td(v-else)\r\n              fg-input(v-model=\"model.gender\")\r\n            td(v-if=\"!row.edit\") {{row.mobile}}\r\n            td(v-else)\r\n              fg-input(v-model=\"model.mobile\")\r\n            td(v-if=\"!row.edit\") {{row.people}}\r\n            td(v-else)\r\n              fg-input(v-model=\"model.people\")\r\n            td(v-if=\"!row.edit\") {{row.date}}\r\n            td(v-else)\r\n              fg-input(v-model=\"model.date\")\r\n            td(v-if=\"!row.edit\") {{row.time}}\r\n            td(v-else)\r\n              fg-input(v-model=\"model.time\")\r\n            td.icon-col\r\n              .btn-default(v-if=\"!row.edit\")\r\n                p-button(type='info' icon @click.native='handleEdit(row)')\r\n                  i.ti-pencil-alt\r\n                p-button(style='margin-left: 10px;' type='danger' icon @click.native='handleDelete(row)')\r\n                  i.ti-close\r\n              .btn-edit(v-else)\r\n                p-button(@click.native='handleUpdate(row)' outline) update\r\n                p-button(@click.native='handleCancel(row)' outline) cancel\r\n</template>\r\n\r\n<script>\r\nimport { PaperTable } from '@/components'\r\n\r\nexport default {\r\n  name: 'Booking',\r\n  components: { PaperTable },\r\n  data () {\r\n    return {\r\n      tableColumns: ['ID', '姓名', '性別', '電話', '人數', '訂位日期', '訂位時間', '編輯 / 刪除'],\r\n      tableData: [], // slot-scope='{row}'\r\n      model: [\r\n        {\r\n          name: '',\r\n          gender: '',\r\n          mobile: '',\r\n          people: '',\r\n          date: '',\r\n          time: ''\r\n        }\r\n      ]\r\n    }\r\n  },\r\n  methods: {\r\n    handleEdit (row) { // 編輯\r\n      this.model.name = row.name\r\n      this.model.gender = row.gender\r\n      this.model.mobile = row.mobile\r\n      this.model.people = row.people\r\n      this.model.date = row.date\r\n      this.model.time = row.time\r\n      row.edit = true\r\n    },\r\n    handleDelete (row) { // 刪除\r\n      event.preventDefault()\r\n      const warning = confirm('確定要刪除？')\r\n      if (!warning) return\r\n      this.axios.delete(process.env.VUE_APP_APIURL + '/booking/' + row.id)\r\n        .then(res => {\r\n          this.$swal({\r\n            toast: true,\r\n            showConfirmButton: false,\r\n            icon: 'success',\r\n            title: '刪除成功',\r\n            position: 'top-end',\r\n            timer: 2000,\r\n            timerProgressBar: true\r\n          })\r\n          // this.tableData.splice(row, 1)\r\n          setTimeout(() => {\r\n            location.reload()\r\n          }, 2000)\r\n        })\r\n        .catch(err => {\r\n          alert(err.message)\r\n        })\r\n    },\r\n    handleUpdate (row) { // 更新\r\n      event.preventDefault()\r\n      this.axios.patch(process.env.VUE_APP_APIURL + '/booking', {\r\n        id: row.id,\r\n        name: this.model.name,\r\n        gender: this.model.gender,\r\n        mobile: this.model.mobile,\r\n        people: this.model.people,\r\n        date: this.model.date,\r\n        time: this.model.time\r\n      })\r\n        .then(res => {\r\n          this.$swal({\r\n            toast: true,\r\n            showConfirmButton: false,\r\n            icon: 'success',\r\n            title: '更新成功',\r\n            position: 'top-end',\r\n            timer: 2000,\r\n            timerProgressBar: true\r\n          })\r\n          setTimeout(() => {\r\n            location.reload()\r\n          }, 2000)\r\n        }).catch(err => {\r\n          alert('請按照格式，日期: yyyy-mm-dd，時間: hr:min')\r\n          console.log(err.message)\r\n        })\r\n      row.edit = false\r\n    },\r\n    handleCancel (row) { // 取消\r\n      row.edit = false\r\n    },\r\n    toggleSort (event) { // 排序功能.sort() 還沒做\r\n      console.log(this.tableData)\r\n    }\r\n  },\r\n  mounted () {\r\n    this.axios.get(process.env.VUE_APP_APIURL + '/booking')\r\n      .then(res => {\r\n        let ID = 0 // 自定義ID 排序\r\n        this.tableData = res.data.result.map(d => {\r\n          ID++\r\n          return {\r\n            id: d.id, // 這是DB 的id，patch 更新資料需要findbyid\r\n            ID, // 這是表格顯示的ID\r\n            name: d.name,\r\n            gender: d.gender,\r\n            mobile: d.mobile,\r\n            people: d.people,\r\n            date: d.date.substr(0, 10), // substr(起點字元，終點字元)\r\n            time: d.time,\r\n            edit: false\r\n          }\r\n        })\r\n      })\r\n      .catch(err => {\r\n        console.log(err)\r\n      })\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Booking.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Booking.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Booking.vue?vue&type=template&id=5f58d9dc&lang=pug&\"\nimport script from \"./Booking.vue?vue&type=script&lang=js&\"\nexport * from \"./Booking.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}