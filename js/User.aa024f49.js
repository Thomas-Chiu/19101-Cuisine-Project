(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["User"],{de51:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"user"}},[a("card",[a("form",[t.toggleAdd?a("p-button",{staticClass:"btn-confirm",staticStyle:{"margin-left":"10px"},attrs:{type:"success"},nativeOn:{click:function(e){return t.handleConfirm(e)}}},[t._v("確認")]):t._e(),t.toggleAdd?a("p-button",{staticClass:"btn-add-cancel",staticStyle:{"margin-left":"10px"},attrs:{type:"danger"},nativeOn:{click:function(e){return t.handleAddCancel(e)}}},[t._v("取消")]):a("p-button",{staticClass:"btn-add",attrs:{type:"warning"},nativeOn:{click:function(e){return t.handleAdd(e)}}},[t._v("新增帳號")]),t.toggleAdd?[a("b-alert",{attrs:{variant:"warning",show:""}},[t._v("帳號不可重複 / 帳密最少 4 個字，最多 20 個 / 信箱格式要正確")]),a("b-row",[a("fg-input",{staticClass:"col",attrs:{placeholder:"姓名"},model:{value:t.addModel.name,callback:function(e){t.$set(t.addModel,"name",e)},expression:"addModel.name"}}),a("fg-input",{staticClass:"col",attrs:{placeholder:"帳號"},model:{value:t.addModel.account,callback:function(e){t.$set(t.addModel,"account",e)},expression:"addModel.account"}}),a("fg-input",{staticClass:"col",attrs:{placeholder:"密碼"},model:{value:t.addModel.password,callback:function(e){t.$set(t.addModel,"password",e)},expression:"addModel.password"}}),a("fg-input",{staticClass:"col",attrs:{placeholder:"信箱"},model:{value:t.addModel.email,callback:function(e){t.$set(t.addModel,"email",e)},expression:"addModel.email"}}),a("b-form-radio-group",{attrs:{options:t.options},model:{value:t.addModel.admin,callback:function(e){t.$set(t.addModel,"admin",e)},expression:"addModel.admin"}})],1)]:t._e(),a("paper-table",{attrs:{data:t.tableData,columns:t.tableColumns,type:"hover"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("td",[t._v(t._s(n.ID))]),a("td",[t._v(t._s(n.name)),n.edit?a("fg-input",{model:{value:t.model.name,callback:function(e){t.$set(t.model,"name",e)},expression:"model.name"}}):t._e()],1),a("td",[t._v(t._s(n.account)),n.edit?a("fg-input",{model:{value:t.model.account,callback:function(e){t.$set(t.model,"account",e)},expression:"model.account"}}):t._e()],1),a("td",[t._v(t._s(n.password)),n.edit?a("fg-input",{attrs:{disabled:""}}):t._e()],1),a("td",[t._v(t._s(n.email)),n.edit?a("fg-input",{model:{value:t.model.email,callback:function(e){t.$set(t.model,"email",e)},expression:"model.email"}}):t._e()],1),a("td",[t._v(t._s(n.admin))]),a("td",{staticClass:"icon-col"},[n.edit?a("div",{staticClass:"btn-edit"},[a("p-button",{attrs:{outline:""},nativeOn:{click:function(e){return t.handleUpdate(n)}}},[t._v("update")]),a("p-button",{attrs:{outline:""},nativeOn:{click:function(e){return t.handleCancel(n)}}},[t._v("cancel")])],1):a("div",{staticClass:"btn-default"},[a("p-button",{attrs:{type:"info",icon:""},nativeOn:{click:function(e){return t.handleEdit(n)}}},[a("i",{staticClass:"ti-pencil-alt"})]),a("p-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"danger",icon:""},nativeOn:{click:function(e){return t.handleDelete(n)}}},[a("i",{staticClass:"ti-close"})])],1)])]}}])})],2)])],1)},o=[],i=(a("d81d"),a("b0c0"),a("2af9")),d={name:"User",components:{PaperTable:i["e"]},data:function(){return{tableColumns:["ID","姓名","帳號","密碼","信箱","管理員","編輯 / 刪除"],tableData:[],model:[{name:"",account:"",email:""}],toggleAdd:!1,addModel:{name:"",account:"",password:"",email:"",admin:!1},options:[{text:"使用者",value:!1},{text:"管理者",value:!0}]}},methods:{handleAdd:function(){this.toggleAdd=!0},handleAddCancel:function(){this.addModel.name="",this.addModel.account="",this.addModel.password="",this.addModel.email="",this.addModel.admin=!1,this.toggleAdd=!1},handleConfirm:function(){var t=this;this.axios.post("https://project-19101-cuisine.herokuapp.com//signup",{name:this.addModel.name,account:this.addModel.account,password:this.addModel.password,email:this.addModel.email,admin:this.addModel.admin}).then((function(e){var a=e.data;a.success?(t.$swal({toast:!0,showConfirmButton:!1,icon:"success",title:"新增成功",position:"top-end",timer:2e3,timerProgressBar:!0}),setTimeout((function(){location.reload()}),2e3)):alert("請檢查資料格式")})).catch((function(t){alert(t.message),console.log(t)})),this.toggleAdd=!1},handleEdit:function(t){this.model.name=t.name,this.model.account=t.account,this.model.email=t.email,t.edit=!0},handleDelete:function(t){var e=this;event.preventDefault();var a=confirm("確定要刪除？");a&&this.axios.delete("https://project-19101-cuisine.herokuapp.com//user/"+t.id).then((function(t){e.$swal({toast:!0,showConfirmButton:!1,icon:"success",title:"刪除成功",position:"top-end",timer:2e3,timerProgressBar:!0}),setTimeout((function(){location.reload()}),2e3)})).catch((function(t){alert(t.message),console.log(t)}))},handleUpdate:function(t){var e=this;event.preventDefault(),this.axios.patch("https://project-19101-cuisine.herokuapp.com//user",{id:t.id,name:this.model.name,account:this.model.account,email:this.model.email}).then((function(t){e.$swal({toast:!0,showConfirmButton:!1,icon:"success",title:"更新成功",position:"top-end",timer:2e3,timerProgressBar:!0}),setTimeout((function(){location.reload()}),2e3)})).catch((function(t){alert(t.message)})),t.edit=!1},handleCancel:function(t){t.edit=!1},toggleSort:function(t){console.log(this.tableData)}},mounted:function(){var t=this;this.axios.get("https://project-19101-cuisine.herokuapp.com//user").then((function(e){var a=0;t.tableData=e.data.result.map((function(t){var e="";return e=t.admin?"✔":"",a++,{id:t.id,ID:a,name:t.name,account:t.account,password:t.password,email:t.email,admin:e,edit:!1}}))})).catch((function(t){alert(t.message+" 伺服器錯誤")}))}},s=d,l=a("2877"),c=Object(l["a"])(s,n,o,!1,null,null,null);e["default"]=c.exports}}]);
//# sourceMappingURL=User.aa024f49.js.map