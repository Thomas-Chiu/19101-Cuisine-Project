(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Product"],{2532:function(t,e,n){"use strict";var i=n("23e7"),a=n("5a34"),c=n("1d80"),o=n("ab13");i({target:"String",proto:!0,forced:!o("includes")},{includes:function(t){return!!~String(c(this)).indexOf(a(t),arguments.length>1?arguments[1]:void 0)}})},"44e7":function(t,e,n){var i=n("861d"),a=n("c6b6"),c=n("b622"),o=c("match");t.exports=function(t){var e;return i(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==a(t))}},"5a34":function(t,e,n){var i=n("44e7");t.exports=function(t){if(i(t))throw TypeError("The method doesn't accept regular expressions");return t}},"6e0a":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"product"}},[n("card",[t.toggleAdd?n("p-button",{staticClass:"btn-confirm",staticStyle:{"margin-left":"10px"},attrs:{type:"success"},nativeOn:{click:function(e){return t.handleConfirm(e)}}},[t._v("確認")]):t._e(),t.toggleAdd?n("p-button",{staticClass:"btn-add-cancel",staticStyle:{"margin-left":"10px"},attrs:{type:"danger"},nativeOn:{click:function(e){return t.handleAddCancel(e)}}},[t._v("取消")]):n("p-button",{staticClass:"btn-add",attrs:{type:"warning"},nativeOn:{click:function(e){return t.handleAdd(e)}}},[t._v("新增商品")]),t.toggleAdd?n("b-row",[n("b-col",{staticStyle:{"margin-top":"15px"},attrs:{cols:"12"}},[n("b-alert",{attrs:{variant:"warning",show:""}},[t._v("圖檔限制 5 MB 以下 / 可不上傳圖檔 / 金額不能為 0 / 商品說明最多 200 字")])],1),n("b-col",{attrs:{md:"4"}},[n("b-file",{attrs:{placeholder:"選擇檔案或拖曳至此","drop-placeholder":"將檔案拖曳至此","browse-text":"瀏覽",accept:"image/*"},model:{value:t.addModel.img,callback:function(e){t.$set(t.addModel,"img",e)},expression:"addModel.img"}})],1),n("b-col",{attrs:{md:"8"}},[n("fg-input",{attrs:{placeholder:"商品名稱"},model:{value:t.addModel.name,callback:function(e){t.$set(t.addModel,"name",e)},expression:"addModel.name"}}),n("fg-input",{attrs:{placeholder:"商品金額"},model:{value:t.addModel.price,callback:function(e){t.$set(t.addModel,"price",e)},expression:"addModel.price"}}),n("b-textarea",{attrs:{placeholder:"商品說明"},model:{value:t.addModel.description,callback:function(e){t.$set(t.addModel,"description",e)},expression:"addModel.description"}})],1)],1):t._e()],1),n("card",{attrs:{title:t.cardTitles[0]}},[n("b-row",t._l(t.setMeals,(function(e,i){return n("b-card",{directives:[{name:"pswp",rawName:"v-pswp",value:e.img,expression:"item.img"}],key:i,staticClass:"col-12 col-md-4 col-lg-3",attrs:{"img-src":e.img}},[n("b-row",[n("b-col",{staticClass:"text-center"},[e.edit?n("b-card-body",[n("fg-input",{model:{value:t.model.name,callback:function(e){t.$set(t.model,"name",e)},expression:"model.name"}}),n("fg-input",{model:{value:t.model.price,callback:function(e){t.$set(t.model,"price",e)},expression:"model.price"}}),n("b-textarea",{attrs:{rows:"5"},model:{value:t.model.description,callback:function(e){t.$set(t.model,"description",e)},expression:"model.description"}}),n("div",{staticClass:"btn-edit"},[n("p-button",{attrs:{outline:""},nativeOn:{click:function(n){return t.handleUpdate(e)}}},[t._v("update")]),n("p-button",{attrs:{outline:""},nativeOn:{click:function(n){return t.handleCancel(e)}}},[t._v("cancel")])],1)],1):n("b-card-body",[n("h4",[t._v(t._s(e.name))]),n("p",[t._v("NT "+t._s(e.price))]),n("p",[t._v(t._s(e.description))]),n("div",{staticClass:"btn-default"},[n("p-button",{attrs:{type:"info",icon:""},nativeOn:{click:function(n){return t.handleEdit(e)}}},[n("i",{staticClass:"ti-pencil-alt"})]),n("p-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"danger",icon:""},nativeOn:{click:function(n){return t.handleDelete(e)}}},[n("i",{staticClass:"ti-close"})])],1)])],1)],1)],1)})),1)],1),n("card",{attrs:{title:t.cardTitles[1]}},[n("b-row",t._l(t.hotPots,(function(e,i){return n("b-card",{key:i,staticClass:"col-12 col-md-4 col-lg-3",attrs:{"img-src":e.img}},[n("b-row",[n("b-col",{staticClass:"text-center"},[e.edit?n("b-card-body",[n("fg-input",{model:{value:t.model.name,callback:function(e){t.$set(t.model,"name",e)},expression:"model.name"}}),n("fg-input",{model:{value:t.model.price,callback:function(e){t.$set(t.model,"price",e)},expression:"model.price"}}),n("b-textarea",{attrs:{rows:"5"},model:{value:t.model.description,callback:function(e){t.$set(t.model,"description",e)},expression:"model.description"}}),n("div",{staticClass:"btn-edit"},[n("p-button",{attrs:{outline:""},nativeOn:{click:function(n){return t.handleUpdate(e)}}},[t._v("update")]),n("p-button",{attrs:{outline:""},nativeOn:{click:function(n){return t.handleCancel(e)}}},[t._v("cancel")])],1)],1):n("b-card-body",[n("h4",[t._v(t._s(e.name))]),n("p",[t._v("NT "+t._s(e.price))]),n("p",[t._v(t._s(e.description))]),n("div",{staticClass:"btn-default"},[n("p-button",{attrs:{type:"info",icon:""},nativeOn:{click:function(n){return t.handleEdit(e)}}},[n("i",{staticClass:"ti-pencil-alt"})]),n("p-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"danger",icon:""},nativeOn:{click:function(n){return t.handleDelete(e)}}},[n("i",{staticClass:"ti-close"})])],1)])],1)],1)],1)})),1)],1),n("card",{attrs:{title:t.cardTitles[2]}},[n("b-row",t._l(t.rices,(function(e,i){return n("b-card",{key:i,staticClass:"col-12 col-md-4 col-lg-3",attrs:{"img-src":e.img}},[n("b-row",[n("b-col",{staticClass:"text-center"},[e.edit?n("b-card-body",[n("fg-input",{model:{value:t.model.name,callback:function(e){t.$set(t.model,"name",e)},expression:"model.name"}}),n("fg-input",{model:{value:t.model.price,callback:function(e){t.$set(t.model,"price",e)},expression:"model.price"}}),n("b-textarea",{attrs:{rows:"5"},model:{value:t.model.description,callback:function(e){t.$set(t.model,"description",e)},expression:"model.description"}}),n("div",{staticClass:"btn-edit"},[n("p-button",{attrs:{outline:""},nativeOn:{click:function(n){return t.handleUpdate(e)}}},[t._v("update")]),n("p-button",{attrs:{outline:""},nativeOn:{click:function(n){return t.handleCancel(e)}}},[t._v("cancel")])],1)],1):n("b-card-body",[n("h4",[t._v(t._s(e.name))]),n("p",[t._v("NT "+t._s(e.price))]),n("p",[t._v(t._s(e.description))]),n("div",{staticClass:"btn-default"},[n("p-button",{attrs:{type:"info",icon:""},nativeOn:{click:function(n){return t.handleEdit(e)}}},[n("i",{staticClass:"ti-pencil-alt"})]),n("p-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"danger",icon:""},nativeOn:{click:function(n){return t.handleDelete(e)}}},[n("i",{staticClass:"ti-close"})])],1)])],1)],1)],1)})),1)],1),n("card",{attrs:{title:t.cardTitles[3]}},[n("b-row",t._l(t.noodles,(function(e,i){return n("b-card",{key:i,staticClass:"col-12 col-md-4 col-lg-3",attrs:{"img-src":e.img}},[n("b-row",[n("b-col",{staticClass:"text-center"},[e.edit?n("b-card-body",[n("fg-input",{model:{value:t.model.name,callback:function(e){t.$set(t.model,"name",e)},expression:"model.name"}}),n("fg-input",{model:{value:t.model.price,callback:function(e){t.$set(t.model,"price",e)},expression:"model.price"}}),n("b-textarea",{attrs:{rows:"5"},model:{value:t.model.description,callback:function(e){t.$set(t.model,"description",e)},expression:"model.description"}}),n("div",{staticClass:"btn-edit"},[n("p-button",{attrs:{outline:""},nativeOn:{click:function(n){return t.handleUpdate(e)}}},[t._v("update")]),n("p-button",{attrs:{outline:""},nativeOn:{click:function(n){return t.handleCancel(e)}}},[t._v("cancel")])],1)],1):n("b-card-body",[n("h4",[t._v(t._s(e.name))]),n("p",[t._v("NT "+t._s(e.price))]),n("p",[t._v(t._s(e.description))]),n("div",{staticClass:"btn-default"},[n("p-button",{attrs:{type:"info",icon:""},nativeOn:{click:function(n){return t.handleEdit(e)}}},[n("i",{staticClass:"ti-pencil-alt"})]),n("p-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"danger",icon:""},nativeOn:{click:function(n){return t.handleDelete(e)}}},[n("i",{staticClass:"ti-close"})])],1)])],1)],1)],1)})),1)],1),n("card",{attrs:{title:t.cardTitles[4]}},[n("b-row",t._l(t.aLaCartes,(function(e,i){return n("b-card",{key:i,staticClass:"col-12 col-md-4 col-lg-3",attrs:{"img-src":e.img}},[n("b-row",[n("b-col",{staticClass:"text-center"},[e.edit?n("b-card-body",[n("fg-input",{model:{value:t.model.name,callback:function(e){t.$set(t.model,"name",e)},expression:"model.name"}}),n("fg-input",{model:{value:t.model.price,callback:function(e){t.$set(t.model,"price",e)},expression:"model.price"}}),n("b-textarea",{attrs:{rows:"5"},model:{value:t.model.description,callback:function(e){t.$set(t.model,"description",e)},expression:"model.description"}}),n("div",{staticClass:"btn-edit"},[n("p-button",{attrs:{outline:""},nativeOn:{click:function(n){return t.handleUpdate(e)}}},[t._v("update")]),n("p-button",{attrs:{outline:""},nativeOn:{click:function(n){return t.handleCancel(e)}}},[t._v("cancel")])],1)],1):n("b-card-body",[n("h4",[t._v(t._s(e.name))]),n("p",[t._v("NT "+t._s(e.price))]),n("p",[t._v(t._s(e.description))]),n("div",{staticClass:"btn-default"},[n("p-button",{attrs:{type:"info",icon:""},nativeOn:{click:function(n){return t.handleEdit(e)}}},[n("i",{staticClass:"ti-pencil-alt"})]),n("p-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"danger",icon:""},nativeOn:{click:function(n){return t.handleDelete(e)}}},[n("i",{staticClass:"ti-close"})])],1)])],1)],1)],1)})),1)],1),n("card",{attrs:{title:t.cardTitles[5]}},[n("b-row",t._l(t.preOrders,(function(e,i){return n("b-card",{key:i,staticClass:"col-12 col-md-4 col-lg-3",attrs:{"img-src":e.img}},[n("b-row",[n("b-col",{staticClass:"text-center"},[e.edit?n("b-card-body",[n("fg-input",{model:{value:t.model.name,callback:function(e){t.$set(t.model,"name",e)},expression:"model.name"}}),n("fg-input",{model:{value:t.model.price,callback:function(e){t.$set(t.model,"price",e)},expression:"model.price"}}),n("b-textarea",{attrs:{rows:"5"},model:{value:t.model.description,callback:function(e){t.$set(t.model,"description",e)},expression:"model.description"}}),n("div",{staticClass:"btn-edit"},[n("p-button",{attrs:{outline:""},nativeOn:{click:function(n){return t.handleUpdate(e)}}},[t._v("update")]),n("p-button",{attrs:{outline:""},nativeOn:{click:function(n){return t.handleCancel(e)}}},[t._v("cancel")])],1)],1):n("b-card-body",[n("h4",[t._v(t._s(e.name))]),n("p",[t._v("NT "+t._s(e.price))]),n("p",[t._v(t._s(e.description))]),n("div",{staticClass:"btn-default"},[n("p-button",{attrs:{type:"info",icon:""},nativeOn:{click:function(n){return t.handleEdit(e)}}},[n("i",{staticClass:"ti-pencil-alt"})]),n("p-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"danger",icon:""},nativeOn:{click:function(n){return t.handleDelete(e)}}},[n("i",{staticClass:"ti-close"})])],1)])],1)],1)],1)})),1)],1)],1)},a=[],c=(n("a4d3"),n("e01a"),n("caad"),n("d81d"),n("b0c0"),n("2532"),{name:"Product",data:function(){return{cardTitles:["猴頭菇套餐","火鍋類","飯類","麵類","單點類","預購類"],setMeals:[],hotPots:[],rices:[],noodles:[],aLaCartes:[],preOrders:[],model:[{name:"",price:"",description:""}],addModel:[{name:"",price:"",description:"",img:""}],toggleAdd:!1}},methods:{handleAdd:function(){this.addModel.name="",this.addModel.price="",this.addModel.description="",this.addModel.img=null,this.toggleAdd=!0},handleAddCancel:function(){console.log(this.addModel),this.toggleAdd=!1},handleConfirm:function(){var t=this;if(event.preventDefault(),null!==this.addModel.img)if(this.addModel.price<=0||this.addModel.img.size>=5242880||!this.addModel.img.type.includes("image"))alert("檔案格式不符");else{var e=new FormData;e.append("img",this.addModel.img),e.append("name",this.addModel.name),e.append("price",this.addModel.price),e.append("description",this.addModel.description),this.axios.post("https://project-19101-cuisine.herokuapp.com//imgproduct",e,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){t.$swal({toast:!0,showConfirmButton:!1,icon:"success",title:"新增成功",position:"top-end",timer:2e3,timerProgressBar:!0}),setTimeout((function(){location.reload()}),2e3)})).catch((function(t){alert(t.message),console.log(t)}))}else this.addModel.price<=0?alert("檔案格式不符"):this.axios.post("https://project-19101-cuisine.herokuapp.com//product",{name:this.addModel.name,price:this.addModel.price,description:this.addModel.description,img:"http://220.128.133.15/s1090105/19101-cuisine/noimg.png"}).then((function(e){t.$swal({toast:!0,showConfirmButton:!1,icon:"success",title:"新增成功",position:"top-end",timer:2e3,timerProgressBar:!0}),setTimeout((function(){location.reload()}),2e3)})).catch((function(t){alert(t.message),console.log(t)}));this.toggleAdd=!1},handleEdit:function(t){this.model.name=t.name,this.model.price=t.price,this.model.description=t.description,t.edit=!0},handleDelete:function(t){var e=this;event.preventDefault();var n=confirm("確定要刪除？");n&&this.axios.delete("https://project-19101-cuisine.herokuapp.com//product/"+t.id).then((function(t){e.$swal({toast:!0,showConfirmButton:!1,icon:"success",title:"刪除成功",position:"top-end",timer:2e3,timerProgressBar:!0}),setTimeout((function(){location.reload()}),2e3)})).catch((function(t){alert(t.message),console.log(t)}))},handleUpdate:function(t){var e=this;event.preventDefault(),this.axios.patch("https://project-19101-cuisine.herokuapp.com//product/"+t.id,{name:this.model.name,price:this.model.price,description:this.model.description}).then((function(t){e.$swal({toast:!0,showConfirmButton:!1,icon:"success",title:"更新成功",position:"top-end",timer:2e3,timerProgressBar:!0}),setTimeout((function(){location.reload()}),2e3)})).catch((function(t){alert(t.message)})),t.edit=!1},handleCancel:function(t){t.edit=!1}},mounted:function(){var t=this;this.axios.get("https://project-19101-cuisine.herokuapp.com//product").then((function(e){var n=e.data.result;n.map((function(e){var n={id:e.id,name:e.name,price:e.price,description:e.description,img:e.img,edit:!1};e.name.includes("猴頭菇套餐")&&t.setMeals.push(n),e.name.includes("火鍋")&&t.hotPots.push(n),e.name.includes("飯")&&t.rices.push(n),e.name.includes("麵")&&t.noodles.push(n),e.name.includes("預購")&&t.preOrders.push(n),e.name.includes("猴頭菇套餐")||e.name.includes("火鍋")||e.name.includes("飯")||e.name.includes("麵")||e.name.includes("預購")||t.aLaCartes.push(n)}))})).catch((function(t){alert(t.message+" 伺服器錯誤")}))}}),o=c,s=n("2877"),l=Object(s["a"])(o,i,a,!1,null,null,null);e["default"]=l.exports},ab13:function(t,e,n){var i=n("b622"),a=i("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[a]=!1,"/./"[t](e)}catch(i){}}return!1}},caad:function(t,e,n){"use strict";var i=n("23e7"),a=n("4d64").includes,c=n("44d2"),o=n("ae40"),s=o("indexOf",{ACCESSORS:!0,1:0});i({target:"Array",proto:!0,forced:!s},{includes:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}}),c("includes")}}]);
//# sourceMappingURL=Product.52c3bc51.js.map